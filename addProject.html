<!--Comp Júnior/Grupo 2-->
<!--Projeto a ser realizado para o PS 2016.1/Etapa 3-->
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width" />
    <title>CompJúnior BugTracker | Cadastrar Projeto</title>
    <link rel="icon" href="imagens/joaninha.png">
    <meta name="description" content="Controlador de erros da CompJr">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!--Referência para a folha de estilo base a ser usada-->
    <link href="css/css.css" rel="stylesheet">
    <script type="text/javascript" src="js/js.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
    <!--Referência para o Sweetalert 2-->
    <link href="css/sweetalert2.css" rel="stylesheet">
    <link rel="stylesheet" href="css/animate.css">
    <script src="js/wow.js"></script>
    <script>
        new WOW().init();
    </script>

</head>

<body>

    <!-- ALL-PAGE -->
    <div id="myContain" class="body">
        <!-- HEADER -->
        <header id="myHeader" class="myHeader">
            <nav class="navig">
                <!-- BRAND e MENU-MOBILE -->
                <div class="mobile-brand">
                    <button id="navi-btn" onclick="slidetoggle()" type="button" class="navbar-toggle collapsed menu-pad" data-toggle="collapse" data-target="#menu-nav" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>

                    </button>

                    <section id="navi-slide">
                        <ul class="navi">
                            <li><a href="index.html" class="link-menu">Home</a></li>
                            <li class="dropdown">
                                <a href="#" class="flex-a dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                    <p>Cadastro</p>
                                    <span class="caret"></span>
                                </a>
                                <ul class="dropdown-menu a-cores">
                                    <li><a href="addError.html">Erros</a></li>
                                    <li><a href="addProject.html">Projetos</a></li>
                                </ul>
                            </li>
                            <li><a href="search.html">Buscar</a></li>
                        </ul>

                    </section>


                    <a class="brand" href="index.html">
                        Compjunior
                    </a>
                </div>
                <!-- BRAND e MENU-MOBILE -->

                <!-- MENU-DESKTOP -->
                <div class="collapse navbar-collapse" id="munu-nav">
                    <ul class="navigator">
                        <li><a href="index.html" class="link-menu">Home</a></li>
                        <li class="dropdown">
                            <a href="#" class="flex-a dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                <p>Cadastro</p>
                                <span class="caret"></span>
                            </a>
                            <ul class="dropdown-menu a-cores">
                                <li><a href="addError.html">Erros</a></li>
                                <li><a href="addProject.html">Projetos</a></li>
                            </ul>
                        </li>
                        <li><a href="search.html">Buscar</a></li>
                    </ul>
                </div>
                <!-- MENU-DESKTOP FIM -->
            </nav>
        </header>
        <!-- HEADER-FIM -->

        <!-- CONTEUDO -->
        <main id="myMain" class="myMain wow fadeIn">
            <!-- Section para cadastro de projetos. -->
            <section id="sectionCadastro" class="container-fluid">
                <h2 class="intro-text text-center">
                Cadastrar Projeto
            </h2>
                <form role="form" name="projectform" id="projectform">
                    <div class="row">
                        <!-- Insere o nome do projeto -->
                        <div class="form-group col-lg-12">
                            <label for="nameProject" class="control-label">Nome do Projeto</label>
                            <input type="text" name="nameProject" id="nameProject" class="form-control">
                        </div>
                        <!-- Selecionar a plataforma -->
                        <div class="form-group col-lg-12">
                            <label for="platform" class="control-label">Plataforma</label>
                            <select class="form-control" name="platform" id="platform">
                                <option disabled selected value> Selecione a plataforma </option>
                                <option>Android</option>
                                <option>WebSite</option>
                                <option>Desktop</option>
                            </select>
                        </div>
                        <!--  Selecionar o membro da equipe que vai estar vinculado àquele projeto -->
                        <div class="form-group col-lg-12">
                            <label for="member" class="control-label">Tester</label>
                            <select class="form-control" name="tester" id="tester">
                                <option disabled selected value> Selecione o tester da equipe </option>
                                <option>Lucas Weber</option>
                                <option>Joao Paulo Costa</option>
                                <option>Matheus Barros</option>
                                <option>Lucas de Paula</option>
                            </select>
                        </div>
                        <!-- Faz uma breve descrição a cerca do projeto -->
                        <div class="clearfix"></div>
                        <div class="form-group col-lg-12">
                            <label for="mensagemProjeto" class="control-label">Descrição do Projeto</label>
                            <textarea class="form-control" rows="6" name="mensagemProjeto" id="mensagemProjeto"></textarea>
                        </div>
                        <div class="form-group col-lg-12">
                            <button type="button" class="btn btn-primary rp " onclick="enviar()">Cadastrar</button>
                            <button type="button" class="btn btn-primary rp " onclick="window.location.href='index.html'">Cancelar</button>
                        </div>
                    </div>

                </form>
            </section>
        </main>
        <!-- CONTEUDO FIM -->

        <!-- FOOTER -->
        <footer id="myFooter" class="myFooter">
            <a href="http://www.compjunior.com.br/new2015/">CompJr</a>
            <p>Desenvolvido com <span class="heart">♥</span> pela Comp Junior.</p>
        </footer>
        <!-- FOOTER FIM -->
    </div>
    <!-- ALL-PAGE FIM -->
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/bootstrapValidator.js"></script>
    <script type="text/javascript" src="js/validarFormProject.js"></script>
    <script type="text/javascript" src="js/sweetalert2.min.js"></script>
    <script type="text/javascript" src="js/extrairNomes.js"></script>
    <script>
        function enviar() {

            var nomeProjeto = $("#nameProject").val(); // nome do projeto
            var mensagemProjeto = $("#mensagemProjeto").val(); // descricao do projeto
            var platform = $("#platform").val(); // plataforma do projeto
            var tester = $("#tester").val(); // membro tester designado ao projeto

            if (nomeProjeto != "" && mensagemProjeto != "" && platform != "" && tester != "") {

                // requisicao via AJAX
                $.ajax({

                    type: 'post',
                    data: {
                        nomeProjeto: nomeProjeto,
                        mensagemProjeto: mensagemProjeto,
                        platform: platform,
                        tester: tester
                    },
                    url: 'php/bdCadastrarProjeto.php',

                    success: function (data) {

                        swal({
                            title: 'O projeto ' + nomeProjeto + ' foi cadastrado com sucesso',
                            //text: 'Sucesso',
                            type: 'success',
                            confirmButtonColor: '#3085d6',
                            confirmButtonText: 'OK'
                        }, function () {
                            window.location.reload();
                        });
                    },
                    error: function (xhr, status, error) {

                        swal({
                            title: 'O projeto não pode ser cadastrado',
                            text: xhr.responseText,
                            type: 'error',
                            confirmButtonColor: '#3085d6',
                            confirmButtonText: 'OK'
                        });
                    }

                });
            } else {
                $("#projectform").submit(); // tenta o submit no form, com isso a validacao de campo é chamada automaticamente
            }
        }
    </script>
</body>

</html>